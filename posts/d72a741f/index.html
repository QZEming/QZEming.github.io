<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
    <link rel="shortcut icon" href="/img/assets/favicon.ico">
        <link href="https://cdn.bootcss.com/highlight.js/8.0/styles/monokai_sublime.min.css" rel="stylesheet">
        
<link rel="stylesheet" href="/css/style.css">

            <title>
                前端小黑
            </title>
            
                <style>
                    #myCanvas {
                        position: absolute;
                        left: 0px;
                        top: 0px;
                    }
                </style>
                

<meta name="generator" content="Hexo 4.2.0"></head>

    <body>
        <header id="header" class="header">
    <div class="avatarContainer">
        <h1 class="blogName">
            前端小黑
        </h1>
    </div>
    <nav class="topNav">
    
        <a href=/  class=>
                    首页
                </a>
        
        <a href=/about  class=>
                    关于
                </a>
        
        <a href=/archives  class=>
                    归档
                </a>
        
        <a href=https://github.com/QZEming  class=>
                    GITHUB
                </a>
        
        <a href=https://blog.csdn.net/zemprogram/  class=>
                    CSDN
                </a>
        
            <img src="/img/assets/code.png" alt="avatar">
</nav>
</header>
            <div class="mainContainer">
                <aside class="aside">
    <div class="info asideContainer">
    <div class="imgContainer">
        <img src=/img/assets/logo.png alt="作者头像">
    </div>
    <div class="authorInfo">
        <p class="authorName">
            前端小黑
        </p>
        <p class="subtitle">
            学习它不香吗
        </p>
        <p class="description">
            想成为小黑的前端小白的博客
        </p>
        <p class="keywords">
            
                <span class="keyword">前端</span>
                
                <span class="keyword">算法</span>
                
                <span class="keyword">计算机网络</span>
                
        </p>
    </div>
</div>
        <div class="tags asideContainer">
    <h3 class="asideTitle">
        标签
    </h3>
    <div id="tagsContainer" class="asideContent shrinkContainer">
        

            <div class="article-tag-list part-list">
                
                    
                        
                            <div class="article-tag-list-item">
                                <a class="article-tag-list-link" href=/tags/JavaScript data-text=JavaScript >
                            JavaScript
                        </a>
                                <span class="article-tag-list-count">3 </span>
                            </div>
                            
                                
                                    
                        
                            <div class="article-tag-list-item">
                                <a class="article-tag-list-link" href=/tags/计算机网络 data-text=计算机网络 >
                            计算机网络
                        </a>
                                <span class="article-tag-list-count">2 </span>
                            </div>
                            
                                
                                    
                        
                            <div class="article-tag-list-item">
                                <a class="article-tag-list-link" href=/tags/css动画 data-text=css动画 >
                            css动画
                        </a>
                                <span class="article-tag-list-count">1 </span>
                            </div>
                            
                                
                                    
                        
                            <div class="article-tag-list-item">
                                <a class="article-tag-list-link" href=/tags/wireshark data-text=wireshark >
                            wireshark
                        </a>
                                <span class="article-tag-list-count">1 </span>
                            </div>
                            
                                
                                    
                        
                            <div class="article-tag-list-item">
                                <a class="article-tag-list-link" href=/tags/css布局 data-text=css布局 >
                            css布局
                        </a>
                                <span class="article-tag-list-count">1 </span>
                            </div>
                            
                                
                                    
                        
                            <div class="article-tag-list-item">
                                <a class="article-tag-list-link" href=/tags/前端工程化 data-text=前端工程化 >
                            前端工程化
                        </a>
                                <span class="article-tag-list-count">1 </span>
                            </div>
                            
                                
                                    
                        
                            <div class="article-tag-list-item">
                                <a class="article-tag-list-link" href=/tags/JavaScript设计模式 data-text=JavaScript设计模式 >
                            JavaScript设计模式
                        </a>
                                <span class="article-tag-list-count">10 </span>
                            </div>
                            
                                
                                    
                        
                                
                                    
                        
                                
                                    
                        
                                
                                    
                        
                                
                                    
                        
                                
                                    
                        
                                
                                    
                        
                                
                                    
                        
                                
                                    
            </div>

            <div class="article-tag-list whole-list">
                
                    <div class="article-tag-list-item">
                        <a class="article-tag-list-link" href=/tags/JavaScript data-text=JavaScript >
                        JavaScript
                    </a>
                        <span class="article-tag-list-count">3 </span>
                    </div>
                    
                    <div class="article-tag-list-item">
                        <a class="article-tag-list-link" href=/tags/计算机网络 data-text=计算机网络 >
                        计算机网络
                    </a>
                        <span class="article-tag-list-count">2 </span>
                    </div>
                    
                    <div class="article-tag-list-item">
                        <a class="article-tag-list-link" href=/tags/css动画 data-text=css动画 >
                        css动画
                    </a>
                        <span class="article-tag-list-count">1 </span>
                    </div>
                    
                    <div class="article-tag-list-item">
                        <a class="article-tag-list-link" href=/tags/wireshark data-text=wireshark >
                        wireshark
                    </a>
                        <span class="article-tag-list-count">1 </span>
                    </div>
                    
                    <div class="article-tag-list-item">
                        <a class="article-tag-list-link" href=/tags/css布局 data-text=css布局 >
                        css布局
                    </a>
                        <span class="article-tag-list-count">1 </span>
                    </div>
                    
                    <div class="article-tag-list-item">
                        <a class="article-tag-list-link" href=/tags/前端工程化 data-text=前端工程化 >
                        前端工程化
                    </a>
                        <span class="article-tag-list-count">1 </span>
                    </div>
                    
                    <div class="article-tag-list-item">
                        <a class="article-tag-list-link" href=/tags/JavaScript设计模式 data-text=JavaScript设计模式 >
                        JavaScript设计模式
                    </a>
                        <span class="article-tag-list-count">10 </span>
                    </div>
                    
                    <div class="article-tag-list-item">
                        <a class="article-tag-list-link" href=/tags/JavaScript性能优化 data-text=JavaScript性能优化 >
                        JavaScript性能优化
                    </a>
                        <span class="article-tag-list-count">3 </span>
                    </div>
                    
                    <div class="article-tag-list-item">
                        <a class="article-tag-list-link" href=/tags/react学习笔记 data-text=react学习笔记 >
                        react学习笔记
                    </a>
                        <span class="article-tag-list-count">6 </span>
                    </div>
                    
                    <div class="article-tag-list-item">
                        <a class="article-tag-list-link" href=/tags/react data-text=react >
                        react
                    </a>
                        <span class="article-tag-list-count">6 </span>
                    </div>
                    
                    <div class="article-tag-list-item">
                        <a class="article-tag-list-link" href=/tags/ES6+ data-text=ES6+ >
                        ES6+
                    </a>
                        <span class="article-tag-list-count">3 </span>
                    </div>
                    
                    <div class="article-tag-list-item">
                        <a class="article-tag-list-link" href=/tags/vue data-text=vue >
                        vue
                    </a>
                        <span class="article-tag-list-count">4 </span>
                    </div>
                    
                    <div class="article-tag-list-item">
                        <a class="article-tag-list-link" href=/tags/JavaScript模块化 data-text=JavaScript模块化 >
                        JavaScript模块化
                    </a>
                        <span class="article-tag-list-count">5 </span>
                    </div>
                    
                    <div class="article-tag-list-item">
                        <a class="article-tag-list-link" href=/tags/axios data-text=axios >
                        axios
                    </a>
                        <span class="article-tag-list-count">1 </span>
                    </div>
                    
                    <div class="article-tag-list-item">
                        <a class="article-tag-list-link" href=/tags/hexo data-text=hexo >
                        hexo
                    </a>
                        <span class="article-tag-list-count">1 </span>
                    </div>
                    
            </div>
            
                <p class="conHandle">
                    <span id="tagsSpread">展开</span>
                    <span id="tagsPackUP">收起</span>
                </p>
                
                    
    </div>
</div>
            <div class="categories asideContainer">
    <h3 class="asideTitle">
        categories
    </h3>
    <div id="categoriesContaner" class="asideContent shrinkContainer">
        
            <div class="article-tag-list part-list">
                
                    
                        
                            <div class="article-tag-list-item">
                                <a class="article-tag-list-link" href=/categories/JavaScript data-text=JavaScript >
                            JavaScript
                        </a>
                                <span class="article-tag-list-count">24 </span>
                            </div>
                            
                                
                                    
                        
                            <div class="article-tag-list-item">
                                <a class="article-tag-list-link" href=/categories/计算机网络 data-text=计算机网络 >
                            计算机网络
                        </a>
                                <span class="article-tag-list-count">2 </span>
                            </div>
                            
                                
                                    
                        
                            <div class="article-tag-list-item">
                                <a class="article-tag-list-link" href=/categories/css data-text=css >
                            css
                        </a>
                                <span class="article-tag-list-count">2 </span>
                            </div>
                            
                                
                                    
                        
                            <div class="article-tag-list-item">
                                <a class="article-tag-list-link" href=/categories/wireshark data-text=wireshark >
                            wireshark
                        </a>
                                <span class="article-tag-list-count">1 </span>
                            </div>
                            
                                
                                    
                        
                            <div class="article-tag-list-item">
                                <a class="article-tag-list-link" href=/categories/前端工程化 data-text=前端工程化 >
                            前端工程化
                        </a>
                                <span class="article-tag-list-count">1 </span>
                            </div>
                            
                                
                                    
                        
                                
                                    
                        
                                
                                    
                        
                                
                                    
            </div>

            <div class="article-tag-list whole-list">
                
                    <div class="article-tag-list-item">
                        <a class="article-tag-list-link" href=/categories/JavaScript data-text=JavaScript >
                        JavaScript
                    </a>
                        <span class="article-tag-list-count">24 </span>
                    </div>
                    
                    <div class="article-tag-list-item">
                        <a class="article-tag-list-link" href=/categories/计算机网络 data-text=计算机网络 >
                        计算机网络
                    </a>
                        <span class="article-tag-list-count">2 </span>
                    </div>
                    
                    <div class="article-tag-list-item">
                        <a class="article-tag-list-link" href=/categories/css data-text=css >
                        css
                    </a>
                        <span class="article-tag-list-count">2 </span>
                    </div>
                    
                    <div class="article-tag-list-item">
                        <a class="article-tag-list-link" href=/categories/wireshark data-text=wireshark >
                        wireshark
                    </a>
                        <span class="article-tag-list-count">1 </span>
                    </div>
                    
                    <div class="article-tag-list-item">
                        <a class="article-tag-list-link" href=/categories/前端工程化 data-text=前端工程化 >
                        前端工程化
                    </a>
                        <span class="article-tag-list-count">1 </span>
                    </div>
                    
                    <div class="article-tag-list-item">
                        <a class="article-tag-list-link" href=/categories/react data-text=react >
                        react
                    </a>
                        <span class="article-tag-list-count">6 </span>
                    </div>
                    
                    <div class="article-tag-list-item">
                        <a class="article-tag-list-link" href=/categories/vue data-text=vue >
                        vue
                    </a>
                        <span class="article-tag-list-count">2 </span>
                    </div>
                    
                    <div class="article-tag-list-item">
                        <a class="article-tag-list-link" href=/categories/框架 data-text=框架 >
                        框架
                    </a>
                        <span class="article-tag-list-count">4 </span>
                    </div>
                    
            </div>
            
                <p class="conHandle">
                    <span id="categoriesSpread">展开</span>
                    <span id="categoriesPackUP">收起</span>
                </p>
                
                    
    </div>
</div>
</aside>
                    <main class="main">
    
        <article class="articleContainer">
    <h1 class="articleTitle">
        <span>JavaScript性能优化——循环优化</span>
    </h1>
    <div class="articleContent">
        <p>循环是我们在写代码时经常用到的一种结构，而往往在考虑性能优化时，循环的优化能带来很大的收益，特别是当我们不得不循环多次时，如果没对性能进行优化，那毫无疑问会带来性能的负担。</p>
<a id="more"></a>
<h1 id="循环的类型"><a href="#循环的类型" class="headerlink" title="循环的类型"></a>循环的类型</h1><h2 id="1-for循环"><a href="#1-for循环" class="headerlink" title="1. for循环"></a>1. for循环</h2><p>for循环可能是我们最常用的循环，相对于其他种循环来说，for循环将初始化，判断终止条件，判断值的改变明显地写在了括号内，更为直观。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>;i&lt;sum;i++)&#123;<br>    <span class="hljs-comment">//...</span><br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="2-while循环"><a href="#2-while循环" class="headerlink" title="2. while循环"></a>2. while循环</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">while</span>(i&lt;sum)&#123;<br>    <span class="hljs-comment">// ...</span><br>    i++;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="3-do…while循环"><a href="#3-do…while循环" class="headerlink" title="3. do…while循环"></a>3. do…while循环</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">do</span>&#123;<br>    <span class="hljs-comment">// ...</span><br>    i++;<br>&#125;<span class="hljs-keyword">while</span>(i&lt;sum)<br></code></pre></td></tr></table></figure>
<h2 id="4-for-in"><a href="#4-for-in" class="headerlink" title="4. for-in"></a>4. for-in</h2><p>for-in循环一般用于遍历对象中的成员，一般不会使用for-in，因为for-in循环会对性能有更多消耗，会在下文提及原因</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> prop <span class="hljs-keyword">in</span> object)&#123;<br>    <span class="hljs-comment">// ...</span><br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="5-for-of"><a href="#5-for-of" class="headerlink" title="5. for-of"></a>5. for-of</h2><p>for-of循环也可用于遍历对象中的成员，与for-in不同的是，for-of可以使用break和return语句来跳出循环。然而，虽然其性能消耗比for-in少，但是其性能消耗相对于前三种来说还是更多的，将在下文提及原因</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> prop <span class="hljs-keyword">of</span> object)&#123;<br>    <span class="hljs-comment">// ...</span><br>&#125;<br></code></pre></td></tr></table></figure>
<h1 id="循环类型的性能"><a href="#循环类型的性能" class="headerlink" title="循环类型的性能"></a>循环类型的性能</h1><p>在对上面的几种循环遍历数组进行测试后，可以发现for-in循环和for-of循环的速度明显慢于其它三种，对于for-in来说，需要同时遍历实例和原型链，在遍历上的消耗更多，而对于for-of来说，需要去调用Symbol.iterator函数来构建一个迭代器，自动调用next()，且不向next()传入任何值，在接收到done:true之后停止，自然回比前三种方法慢。</p>
<p>（这里的性能测试我使用了console.time()和console.timeEnd()之间的时间差距来比对，因为会受浏览器等各种因素影响，上面的结论是我测试了多组数据后得出的结论）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> arr = [];<br>arr.length = <span class="hljs-number">10000</span>;<br>arr.fill(<span class="hljs-number">1</span>);<br> <br>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-built_in">console</span>.time(<span class="hljs-string">'for循环'</span>);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; arr.length; i++) &#123;<br>        <span class="hljs-comment">// ... 相同操作</span><br>    &#125;<br>    <span class="hljs-built_in">console</span>.timeEnd(<span class="hljs-string">'for循环'</span>)<br>&#125;)();<br> <br>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-built_in">console</span>.time(<span class="hljs-string">'while循环'</span>)<br>    <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span> (i &lt; arr.length) &#123;<br>        <span class="hljs-comment">// ...相同操作</span><br>        i++;<br>    &#125;<br>    <span class="hljs-built_in">console</span>.timeEnd(<span class="hljs-string">'while循环'</span>)<br>&#125;)();<br> <br>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-built_in">console</span>.time(<span class="hljs-string">'do-while'</span>);<br>    <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">do</span> &#123;<br>        <span class="hljs-comment">// ...相同操作</span><br>        i++;<br>    &#125; <span class="hljs-keyword">while</span> (i &lt; arr.length)<br>    <span class="hljs-built_in">console</span>.timeEnd(<span class="hljs-string">'do-while'</span>);<br>&#125;)();<br> <br>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-built_in">console</span>.time(<span class="hljs-string">'for-in'</span>);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i <span class="hljs-keyword">of</span> arr) &#123;<br>        <span class="hljs-comment">// ...相同操作</span><br>    &#125;<br>    <span class="hljs-built_in">console</span>.timeEnd(<span class="hljs-string">'for-in'</span>);<br>&#125;)();<br> <br>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-built_in">console</span>.time(<span class="hljs-string">'for-of'</span>);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i <span class="hljs-keyword">of</span> arr) &#123;<br>        <span class="hljs-comment">// ...相同操作</span><br>    &#125;<br>    <span class="hljs-built_in">console</span>.timeEnd(<span class="hljs-string">'for-of'</span>);<br>&#125;)();<br></code></pre></td></tr></table></figure>
<p>下面是其中一次的执行结果<br><img src="https://user-gold-cdn.xitu.io/2020/2/26/1707d73f6626d2cd?w=295&h=198&f=png&s=41026" alt=""></p>
<h1 id="性能优化"><a href="#性能优化" class="headerlink" title="性能优化"></a>性能优化</h1><p>要对循环的性能进行优化，只能减少其每次循环的工作量，或者减少循环的次数</p>
<h2 id="减少每次循环工作量"><a href="#减少每次循环工作量" class="headerlink" title="减少每次循环工作量"></a>减少每次循环工作量</h2><p>首先看看for遍历一个数组每次循环的工作量</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>;i&lt;arr.length;i++)&#123;<br>    <span class="hljs-comment">//...操作</span><br>&#125;<br></code></pre></td></tr></table></figure>
<ol>
<li><p>查找一次arr的长度</p>
</li>
<li><p>比较一次i和arr.length的值</p>
</li>
<li><p>判断比较结果为true或false</p>
</li>
<li><p>执行for循环内的自增</p>
</li>
<li><p>i变量的自增（如果步骤3中判断结果为true的话）</p>
</li>
</ol>
<h2 id="存储arr-length的值"><a href="#存储arr-length的值" class="headerlink" title="存储arr.length的值"></a>存储arr.length的值</h2><p>每次我们都要去查找一次length的值，那么我们为什么不先在设置初始条件时使用一个变量来存储arr的length值呢。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>,len=arr.length;i&lt;len;i++)&#123;<br>    <span class="hljs-comment">//...操作</span><br>&#125;<br></code></pre></td></tr></table></figure>
<p>这样做的好处是，arr至少是在当前作用域链的下一个位置，如果我们把arr.length放在当前一个局部变量中，在查找该值时在作用域链上查找的步数就会减少，所以能有效地减少性能的消耗。这样上面的步骤就变为</p>
<ol>
<li><p>比较一次i和len的值</p>
</li>
<li><p>判断比较结果为true或false</p>
</li>
<li><p>执行for循环内的自增</p>
</li>
<li><p>i变量的自增（如果步骤3中判断结果为true的话）</p>
</li>
</ol>
<h2 id="倒序循环"><a href="#倒序循环" class="headerlink" title="倒序循环"></a>倒序循环</h2><p>倒序循环是一种通用的循环优化方法，我们通过代码来理解</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=arr.length;i--;)&#123;<br>    <span class="hljs-comment">//...操作</span><br>&#125;<br></code></pre></td></tr></table></figure>
<p>此时每次循环的步骤变为</p>
<ol>
<li><p>i==true的判断（i为0时等式即成立）</p>
</li>
<li><p>i变量的自减</p>
</li>
<li><p>执行循环内的操作</p>
</li>
</ol>
<p>可以看到，倒序操作实际上就是将i和数组长度的比较和判断为true或false这两步合并，以此来得到性能上的优化。</p>
<h1 id="减少循环次数"><a href="#减少循环次数" class="headerlink" title="减少循环次数"></a>减少循环次数</h1><h2 id="达夫设备"><a href="#达夫设备" class="headerlink" title="达夫设备"></a>达夫设备</h2><p>达夫设备实际上就是在一次循环中完成多次循环的事情，以达到减少循环次数的作用，看看下面的代码（代码源自《高性能JavaScript》）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// items为要遍历的数组，process为对数组内成员的操作方法</span><br> <br><span class="hljs-keyword">var</span> i=items.length%<span class="hljs-number">8</span>;<br><span class="hljs-keyword">while</span>(i)&#123;<br>    process(items[i--]);<br>&#125;<br> <br>i=<span class="hljs-built_in">Math</span>.floor(items.length/<span class="hljs-number">8</span>);<br> <br><span class="hljs-keyword">while</span>(i)&#123;<br>    process(items[i--]);<br>    process(items[i--]);<br>    process(items[i--]);<br>    process(items[i--]);<br>    process(items[i--]);<br>    process(items[i--]);<br>    process(items[i--]);<br>    process(items[i--]);<br>&#125;<br></code></pre></td></tr></table></figure>
<p>这里通过取长度除以8的余数，先进行这个余数次数的循环，然后之后每次循环执行8次自减操作，相当于一次循环中完成八次循环的操作，以此来达到减少循环的次数的目的</p>
<h2 id="基于函数的迭代"><a href="#基于函数的迭代" class="headerlink" title="基于函数的迭代"></a>基于函数的迭代</h2><p>很多框架中都封装了迭代循环的方法，包括JavaScript本身也有原生的数组迭代方法，看看下列实例（代码原则《高性能JavaScript》）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 原生数组方法</span><br>items.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, index, array</span>) </span>&#123;<br>    process(value);<br>&#125;);<br> <br><span class="hljs-comment">// YUI 3</span><br>Y.Array.each(item, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, index, array</span>) </span>&#123;<br>    process(value);<br>&#125;);<br> <br><span class="hljs-comment">// jQuery</span><br>jQuery.each(items, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">index, value</span>) </span>&#123;<br>    process(value);<br>&#125;);<br> <br><span class="hljs-comment">// Dojo</span><br>dojo.forEach(items, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, index, array</span>) </span>&#123;<br>    process(values);<br>&#125;);<br> <br><span class="hljs-comment">// prototype</span><br>items.each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, index</span>) </span>&#123;<br>    process(value);<br>&#125;);<br> <br><span class="hljs-comment">// MooTools</span><br>$each(items, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, index</span>) </span>&#123;<br>    process(value);<br>&#125;);<br></code></pre></td></tr></table></figure>
<p>虽然函数迭代的方法较为方便，但从性能上来说，函数迭代需要去调用函数，性能上的消耗会比普通的循环更多，所以在追求性能的情况下不适合使用函数迭代的方法。</p>
<hr>
<p>参考自《高性能JavaScript》</p>

    </div>
</article>
            
</main>
                        
                            <aside class="articleDirectory">
    <h2 class="asideTitle">目录</h2>
    <div class="asideContainer">
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#循环的类型"><span class="toc-number">1.</span> <span class="toc-text">循环的类型</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-for循环"><span class="toc-number">1.1.</span> <span class="toc-text">1. for循环</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-while循环"><span class="toc-number">1.2.</span> <span class="toc-text">2. while循环</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-do…while循环"><span class="toc-number">1.3.</span> <span class="toc-text">3. do…while循环</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-for-in"><span class="toc-number">1.4.</span> <span class="toc-text">4. for-in</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-for-of"><span class="toc-number">1.5.</span> <span class="toc-text">5. for-of</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#循环类型的性能"><span class="toc-number">2.</span> <span class="toc-text">循环类型的性能</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#性能优化"><span class="toc-number">3.</span> <span class="toc-text">性能优化</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#减少每次循环工作量"><span class="toc-number">3.1.</span> <span class="toc-text">减少每次循环工作量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#存储arr-length的值"><span class="toc-number">3.2.</span> <span class="toc-text">存储arr.length的值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#倒序循环"><span class="toc-number">3.3.</span> <span class="toc-text">倒序循环</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#减少循环次数"><span class="toc-number">4.</span> <span class="toc-text">减少循环次数</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#达夫设备"><span class="toc-number">4.1.</span> <span class="toc-text">达夫设备</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#基于函数的迭代"><span class="toc-number">4.2.</span> <span class="toc-text">基于函数的迭代</span></a></li></ol></li></ol>
    </div>
</aside>
                                
            </div>
            <footer class="footer">
    <p>Site by <a href="https://hexo.io/" target="_blank" rel="noopener">hexo</a> | theme <a>simp</a></p>
</footer>
                <div class="backTop icon-arrow-up hideBtn" id="backTop"></div>
                
                    <script src="/js/highlight.js"></script>
                    <script>
                        hljs.initHighlightingOnLoad();
                    </script>
                    
                        
                            <canvas id="myCanvas">
                                    </canvas>
                            <script src="/js/canvas.js"></script>
                            
                                <script src="/js/script.js"></script>
    </body>

</html>